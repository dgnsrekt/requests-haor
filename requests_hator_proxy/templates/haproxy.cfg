global
    maxconn {{ max_connections }}
    log stdout local0

defaults
    mode {{ mode }}
    log     global
    option  {{ option_log }}
    timeout client      {{ timeout_client }}s
    timeout connect     {{ timeout_connect }}s
    timeout queue       {{ timeout_queue }}s
    timeout server      {{ timeout_server }}s

frontend {{ host_name }}
    mode {{ mode }}
    bind *:{{ host_port }}
    default_backend {{ backend_name }}

backend {{ backend_name }}
    mode {{ mode }}
    balance roundrobin
    {% for proxy in proxies %}
    server {{ proxy.name }} {{ proxy.name }}:{{ proxy_mode.value }} check {% endfor %}

frontend dashboard
    bind *:{{ dashboard_bind_port }}
    option  httplog
    mode  http
    stats enable
    stats uri /
    stats refresh {{ dashboard_refresh_rate }}s
